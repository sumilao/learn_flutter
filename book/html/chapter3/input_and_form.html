<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>3.5ï¼šè¾“å…¥æ¡†åŠè¡¨å• - flutterå®æˆ˜ï¼ˆç¬¬äºŒç‰ˆï¼‰</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">flutterå®æˆ˜ï¼ˆç¬¬äºŒç‰ˆï¼‰</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="35-è¾“å…¥æ¡†åŠè¡¨å•"><a class="header" href="#35-è¾“å…¥æ¡†åŠè¡¨å•">3.5 è¾“å…¥æ¡†åŠè¡¨å•</a></h1>
<p>Material ç»„ä»¶åº“ä¸­æä¾›äº†è¾“å…¥æ¡†ç»„ä»¶<code>TextField</code>å’Œè¡¨å•ç»„ä»¶<code>Form</code>ã€‚ä¸‹é¢æˆ‘ä»¬åˆ†åˆ«ä»‹ç»ä¸€ä¸‹ã€‚</p>
<h2 id="351-textfield"><a class="header" href="#351-textfield">3.5.1 TextField</a></h2>
<p><code>TextField</code>ç”¨äºæ–‡æœ¬è¾“å…¥ï¼Œå®ƒæä¾›äº†å¾ˆå¤šå±æ€§ï¼Œæˆ‘ä»¬å…ˆç®€å•ä»‹ç»ä¸€ä¸‹ä¸»è¦å±æ€§çš„ä½œç”¨ï¼Œç„¶åé€šè¿‡å‡ ä¸ªç¤ºä¾‹æ¥æ¼”ç¤ºä¸€ä¸‹å…³é”®å±æ€§çš„ç”¨æ³•ã€‚</p>
<pre><code class="language-dart">const TextField({
  ...
  TextEditingController controller, 
  FocusNode focusNode,
  InputDecoration decoration = const InputDecoration(),
  TextInputType keyboardType,
  TextInputAction textInputAction,
  TextStyle style,
  TextAlign textAlign = TextAlign.start,
  bool autofocus = false,
  bool obscureText = false,
  int maxLines = 1,
  int maxLength,
  this.maxLengthEnforcement,
  ToolbarOptions? toolbarOptions,
  ValueChanged&lt;String&gt; onChanged,
  VoidCallback onEditingComplete,
  ValueChanged&lt;String&gt; onSubmitted,
  List&lt;TextInputFormatter&gt; inputFormatters,
  bool enabled,
  this.cursorWidth = 2.0,
  this.cursorRadius,
  this.cursorColor,
  this.onTap,
  ...
})
</code></pre>
<ul>
<li>
<p><code>controller</code>ï¼šç¼–è¾‘æ¡†çš„æ§åˆ¶å™¨ï¼Œé€šè¿‡å®ƒå¯ä»¥è®¾ç½®/è·å–ç¼–è¾‘æ¡†çš„å†…å®¹ã€é€‰æ‹©ç¼–è¾‘å†…å®¹ã€ç›‘å¬ç¼–è¾‘æ–‡æœ¬æ”¹å˜äº‹ä»¶ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹æˆ‘ä»¬éƒ½éœ€è¦æ˜¾å¼æä¾›ä¸€ä¸ª<code>controller</code>æ¥ä¸æ–‡æœ¬æ¡†äº¤äº’ã€‚å¦‚æœæ²¡æœ‰æä¾›<code>controller</code>ï¼Œåˆ™<code>TextField</code>å†…éƒ¨ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªã€‚</p>
</li>
<li>
<p><code>focusNode</code>ï¼šç”¨äºæ§åˆ¶<code>TextField</code>æ˜¯å¦å æœ‰å½“å‰é”®ç›˜çš„è¾“å…¥ç„¦ç‚¹ã€‚å®ƒæ˜¯æˆ‘ä»¬å’Œé”®ç›˜äº¤äº’çš„ä¸€ä¸ªå¥æŸ„ï¼ˆhandleï¼‰ã€‚</p>
</li>
<li>
<p><code>InputDecoration</code>ï¼šç”¨äºæ§åˆ¶<code>TextField</code>çš„å¤–è§‚æ˜¾ç¤ºï¼Œå¦‚æç¤ºæ–‡æœ¬ã€èƒŒæ™¯é¢œè‰²ã€è¾¹æ¡†ç­‰ã€‚</p>
</li>
<li>
<p><code>keyboardType</code>ï¼šç”¨äºè®¾ç½®è¯¥è¾“å…¥æ¡†é»˜è®¤çš„é”®ç›˜è¾“å…¥ç±»å‹ï¼Œå–å€¼å¦‚ä¸‹ï¼š</p>
<div class="table-wrapper"><table><thead><tr><th>TextInputTypeæšä¸¾å€¼</th><th>å«ä¹‰</th></tr></thead><tbody>
<tr><td>text</td><td>æ–‡æœ¬è¾“å…¥é”®ç›˜</td></tr>
<tr><td>multiline</td><td>å¤šè¡Œæ–‡æœ¬ï¼Œéœ€å’ŒmaxLinesé…åˆä½¿ç”¨(è®¾ä¸ºnullæˆ–å¤§äº1)</td></tr>
<tr><td>number</td><td>æ•°å­—ï¼›ä¼šå¼¹å‡ºæ•°å­—é”®ç›˜</td></tr>
<tr><td>phone</td><td>ä¼˜åŒ–åçš„ç”µè¯å·ç è¾“å…¥é”®ç›˜ï¼›ä¼šå¼¹å‡ºæ•°å­—é”®ç›˜å¹¶æ˜¾ç¤ºâ€œ* #â€</td></tr>
<tr><td>datetime</td><td>ä¼˜åŒ–åçš„æ—¥æœŸè¾“å…¥é”®ç›˜ï¼›Androidä¸Šä¼šæ˜¾ç¤ºâ€œ: -â€</td></tr>
<tr><td>emailAddress</td><td>ä¼˜åŒ–åçš„ç”µå­é‚®ä»¶åœ°å€ï¼›ä¼šæ˜¾ç¤ºâ€œ@ .â€</td></tr>
<tr><td>url</td><td>ä¼˜åŒ–åçš„urlè¾“å…¥é”®ç›˜ï¼› ä¼šæ˜¾ç¤ºâ€œ/ .â€</td></tr>
</tbody></table>
</div></li>
<li>
<p><code>textInputAction</code>ï¼šé”®ç›˜åŠ¨ä½œæŒ‰é’®å›¾æ ‡(å³å›è½¦é”®ä½å›¾æ ‡)ï¼Œå®ƒæ˜¯ä¸€ä¸ªæšä¸¾å€¼ï¼Œæœ‰å¤šä¸ªå¯é€‰å€¼ï¼Œå…¨éƒ¨çš„å–å€¼åˆ—è¡¨è¯»è€…å¯ä»¥æŸ¥çœ‹APIæ–‡æ¡£ï¼Œä¸‹é¢æ˜¯å½“å€¼ä¸º<code>TextInputAction.search</code>æ—¶ï¼ŒåŸç”ŸAndroidç³»ç»Ÿä¸‹é”®ç›˜æ ·å¼å¦‚å›¾3-18æ‰€ç¤ºï¼š</p>
<p><img src="../imgs/3-18.png" alt="å›¾3-18" /></p>
</li>
<li>
<p><code>style</code>ï¼šæ­£åœ¨ç¼–è¾‘çš„æ–‡æœ¬æ ·å¼ã€‚</p>
</li>
<li>
<p><code>textAlign</code>: è¾“å…¥æ¡†å†…ç¼–è¾‘æ–‡æœ¬åœ¨æ°´å¹³æ–¹å‘çš„å¯¹é½æ–¹å¼ã€‚</p>
</li>
<li>
<p><code>autofocus</code>: æ˜¯å¦è‡ªåŠ¨è·å–ç„¦ç‚¹ã€‚</p>
</li>
<li>
<p><code>obscureText</code>ï¼šæ˜¯å¦éšè—æ­£åœ¨ç¼–è¾‘çš„æ–‡æœ¬ï¼Œå¦‚ç”¨äºè¾“å…¥å¯†ç çš„åœºæ™¯ç­‰ï¼Œæ–‡æœ¬å†…å®¹ä¼šç”¨â€œâ€¢â€æ›¿æ¢ã€‚</p>
</li>
<li>
<p><code>maxLines</code>ï¼šè¾“å…¥æ¡†çš„æœ€å¤§è¡Œæ•°ï¼Œé»˜è®¤ä¸º1ï¼›å¦‚æœä¸º<code>null</code>ï¼Œåˆ™æ— è¡Œæ•°é™åˆ¶ã€‚</p>
</li>
<li>
<p><code>maxLength</code>å’Œ<code>maxLengthEnforcement</code> ï¼š<code>maxLength</code>ä»£è¡¨è¾“å…¥æ¡†æ–‡æœ¬çš„æœ€å¤§é•¿åº¦ï¼Œè®¾ç½®åè¾“å…¥æ¡†å³ä¸‹è§’ä¼šæ˜¾ç¤ºè¾“å…¥çš„æ–‡æœ¬è®¡æ•°ã€‚<code>maxLengthEnforcement</code>å†³å®šå½“è¾“å…¥æ–‡æœ¬é•¿åº¦è¶…è¿‡<code>maxLength</code>æ—¶å¦‚ä½•å¤„ç†ï¼Œå¦‚æˆªæ–­ã€è¶…å‡ºç­‰ã€‚</p>
</li>
<li>
<p><code>toolbarOptions</code>ï¼šé•¿æŒ‰æˆ–é¼ æ ‡å³å‡»æ—¶å‡ºç°çš„èœå•ï¼ŒåŒ…æ‹¬ copyã€cutã€paste ä»¥åŠ selectAllã€‚</p>
</li>
<li>
<p><code>onChange</code>ï¼šè¾“å…¥æ¡†å†…å®¹æ”¹å˜æ—¶çš„å›è°ƒå‡½æ•°ï¼›æ³¨ï¼šå†…å®¹æ”¹å˜äº‹ä»¶ä¹Ÿå¯ä»¥é€šè¿‡<code>controller</code>æ¥ç›‘å¬ã€‚</p>
</li>
<li>
<p><code>onEditingComplete</code>å’Œ<code>onSubmitted</code>ï¼šè¿™ä¸¤ä¸ªå›è°ƒéƒ½æ˜¯åœ¨è¾“å…¥æ¡†è¾“å…¥å®Œæˆæ—¶è§¦å‘ï¼Œæ¯”å¦‚æŒ‰äº†é”®ç›˜çš„å®Œæˆé”®ï¼ˆå¯¹å·å›¾æ ‡ï¼‰æˆ–æœç´¢é”®ï¼ˆğŸ”å›¾æ ‡ï¼‰ã€‚ä¸åŒçš„æ˜¯ä¸¤ä¸ªå›è°ƒç­¾åä¸åŒï¼Œ<code>onSubmitted</code>å›è°ƒæ˜¯<code>ValueChanged&lt;String&gt;</code>ç±»å‹ï¼Œå®ƒæ¥æ”¶å½“å‰è¾“å…¥å†…å®¹åšä¸ºå‚æ•°ï¼Œè€Œ<code>onEditingComplete</code>ä¸æ¥æ”¶å‚æ•°ã€‚</p>
</li>
<li>
<p><code>inputFormatters</code>ï¼šç”¨äºæŒ‡å®šè¾“å…¥æ ¼å¼ï¼›å½“ç”¨æˆ·è¾“å…¥å†…å®¹æ”¹å˜æ—¶ï¼Œä¼šæ ¹æ®æŒ‡å®šçš„æ ¼å¼æ¥æ ¡éªŒã€‚</p>
</li>
<li>
<p><code>enable</code>ï¼šå¦‚æœä¸º<code>false</code>ï¼Œåˆ™è¾“å…¥æ¡†ä¼šè¢«ç¦ç”¨ï¼Œç¦ç”¨çŠ¶æ€ä¸èƒ½å“åº”è¾“å…¥å’Œäº‹ä»¶ï¼ŒåŒæ—¶æ˜¾ç¤ºç¦ç”¨æ€æ ·å¼ï¼ˆåœ¨å…¶<code>decoration</code>ä¸­å®šä¹‰ï¼‰ã€‚</p>
</li>
<li>
<p><code>cursorWidth</code>ã€<code>cursorRadius</code>å’Œ<code>cursorColor</code>ï¼šè¿™ä¸‰ä¸ªå±æ€§æ˜¯ç”¨äºè‡ªå®šä¹‰è¾“å…¥æ¡†å…‰æ ‡å®½åº¦ã€åœ†è§’å’Œé¢œè‰²çš„ã€‚</p>
</li>
</ul>
<h3 id="1-ç¤ºä¾‹ç™»å½•è¾“å…¥æ¡†"><a class="header" href="#1-ç¤ºä¾‹ç™»å½•è¾“å…¥æ¡†">1. ç¤ºä¾‹ï¼šç™»å½•è¾“å…¥æ¡†</a></h3>
<h4 id="1å¸ƒå±€"><a class="header" href="#1å¸ƒå±€">1ï¼‰å¸ƒå±€</a></h4>
<p>æˆ‘ä»¬å®ç°ä¸€ä¸ªç™»å½•è¡¨å•ï¼š</p>
<pre><code class="language-dart">Column(
  children: &lt;Widget&gt;[
    TextField(
      autofocus: true,
      decoration: InputDecoration(
        labelText: "ç”¨æˆ·å",
        hintText: "ç”¨æˆ·åæˆ–é‚®ç®±",
        prefixIcon: Icon(Icons.person)
      ),
    ),
    TextField(
      decoration: InputDecoration(
        labelText: "å¯†ç ",
        hintText: "æ‚¨çš„ç™»å½•å¯†ç ",
        prefixIcon: Icon(Icons.lock)
      ),
      obscureText: true,
    ),
  ],
);
</code></pre>
<p>è¿è¡Œåï¼Œæ•ˆæœå¦‚å›¾3-19æ‰€ç¤ºï¼š</p>
<p><img src="../imgs/3-19.png" alt="å›¾3-19" /></p>
<h4 id="2è·å–è¾“å…¥å†…å®¹"><a class="header" href="#2è·å–è¾“å…¥å†…å®¹">2ï¼‰è·å–è¾“å…¥å†…å®¹</a></h4>
<p>è·å–è¾“å…¥å†…å®¹æœ‰ä¸¤ç§æ–¹å¼ï¼š</p>
<ol>
<li>å®šä¹‰ä¸¤ä¸ªå˜é‡ï¼Œç”¨äºä¿å­˜ç”¨æˆ·åå’Œå¯†ç ï¼Œç„¶ååœ¨<code>onChange</code>è§¦å‘æ—¶ï¼Œå„è‡ªä¿å­˜ä¸€ä¸‹è¾“å…¥å†…å®¹ã€‚</li>
<li>é€šè¿‡<code>controller</code>ç›´æ¥è·å–ã€‚</li>
</ol>
<p>ç¬¬ä¸€ç§æ–¹å¼æ¯”è¾ƒç®€å•ï¼Œä¸åœ¨ä¸¾ä¾‹ï¼Œæˆ‘ä»¬æ¥é‡ç‚¹çœ‹ä¸€ä¸‹ç¬¬äºŒç§æ–¹å¼ï¼Œæˆ‘ä»¬ä»¥ç”¨æˆ·åè¾“å…¥æ¡†ä¸¾ä¾‹ï¼š</p>
<p>å®šä¹‰ä¸€ä¸ª<code>controller</code>ï¼š</p>
<pre><code class="language-dart">//å®šä¹‰ä¸€ä¸ªcontroller
TextEditingController _unameController = TextEditingController();
</code></pre>
<p>ç„¶åè®¾ç½®è¾“å…¥æ¡†controllerï¼š</p>
<pre><code class="language-dart">TextField(
    autofocus: true,
    controller: _unameController, //è®¾ç½®controller
    ...
)
</code></pre>
<p>é€šè¿‡controllerè·å–è¾“å…¥æ¡†å†…å®¹</p>
<pre><code class="language-dart">print(_unameController.text)
</code></pre>
<h4 id="3ç›‘å¬æ–‡æœ¬å˜åŒ–"><a class="header" href="#3ç›‘å¬æ–‡æœ¬å˜åŒ–">3ï¼‰ç›‘å¬æ–‡æœ¬å˜åŒ–</a></h4>
<p>ç›‘å¬æ–‡æœ¬å˜åŒ–ä¹Ÿæœ‰ä¸¤ç§æ–¹å¼ï¼š</p>
<ol>
<li>
<p>è®¾ç½®<code>onChange</code>å›è°ƒï¼Œå¦‚ï¼š</p>
<pre><code class="language-dart">TextField(
    autofocus: true,
    onChanged: (v) {
      print("onChange: $v");
    }
)
</code></pre>
</li>
<li>
<p>é€šè¿‡<code>controller</code>ç›‘å¬ï¼Œå¦‚ï¼š</p>
<pre><code class="language-dart">@override
void initState() {
  //ç›‘å¬è¾“å…¥æ”¹å˜  
  _unameController.addListener((){
    print(_unameController.text);
  });
}
</code></pre>
</li>
</ol>
<p>ä¸¤ç§æ–¹å¼ç›¸æ¯”ï¼Œ<code>onChanged</code>æ˜¯ä¸“é—¨ç”¨äºç›‘å¬æ–‡æœ¬å˜åŒ–ï¼Œè€Œ<code>controller</code>çš„åŠŸèƒ½å´å¤šä¸€äº›ï¼Œé™¤äº†èƒ½ç›‘å¬æ–‡æœ¬å˜åŒ–å¤–ï¼Œå®ƒè¿˜å¯ä»¥è®¾ç½®é»˜è®¤å€¼ã€é€‰æ‹©æ–‡æœ¬ï¼Œä¸‹é¢æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p>
<p>åˆ›å»ºä¸€ä¸ª<code>controller</code>:</p>
<pre><code class="language-dart">TextEditingController _selectionController =  TextEditingController();
</code></pre>
<p>è®¾ç½®é»˜è®¤å€¼ï¼Œå¹¶ä»ç¬¬ä¸‰ä¸ªå­—ç¬¦å¼€å§‹é€‰ä¸­åé¢çš„å­—ç¬¦</p>
<pre><code class="language-dart">_selectionController.text="hello world!";
_selectionController.selection=TextSelection(
    baseOffset: 2,
    extentOffset: _selectionController.text.length
);
</code></pre>
<p>è®¾ç½®<code>controller</code>:</p>
<pre><code class="language-dart">TextField(
  controller: _selectionController,
)
</code></pre>
<p>è¿è¡Œæ•ˆæœå¦‚å›¾3-20æ‰€ç¤ºï¼š</p>
<p><img src="../imgs/3-20.png" alt="å›¾3-20" /></p>
<h4 id="4æ§åˆ¶ç„¦ç‚¹"><a class="header" href="#4æ§åˆ¶ç„¦ç‚¹">4ï¼‰æ§åˆ¶ç„¦ç‚¹</a></h4>
<p>ç„¦ç‚¹å¯ä»¥é€šè¿‡<code>FocusNode</code>å’Œ<code>FocusScopeNode</code>æ¥æ§åˆ¶ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œç„¦ç‚¹ç”±<code>FocusScope</code>æ¥ç®¡ç†ï¼Œå®ƒä»£è¡¨ç„¦ç‚¹æ§åˆ¶èŒƒå›´ï¼Œå¯ä»¥åœ¨è¿™ä¸ªèŒƒå›´å†…å¯ä»¥é€šè¿‡<code>FocusScopeNode</code>åœ¨è¾“å…¥æ¡†ä¹‹é—´ç§»åŠ¨ç„¦ç‚¹ã€è®¾ç½®é»˜è®¤ç„¦ç‚¹ç­‰ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>FocusScope.of(context)</code> æ¥è·å–Widgetæ ‘ä¸­é»˜è®¤çš„<code>FocusScopeNode</code>ã€‚ä¸‹é¢çœ‹ä¸€ä¸ªç¤ºä¾‹ï¼Œåœ¨æ­¤ç¤ºä¾‹ä¸­åˆ›å»ºä¸¤ä¸ª<code>TextField</code>ï¼Œç¬¬ä¸€ä¸ªè‡ªåŠ¨è·å–ç„¦ç‚¹ï¼Œç„¶ååˆ›å»ºä¸¤ä¸ªæŒ‰é’®ï¼š</p>
<ul>
<li>ç‚¹å‡»ç¬¬ä¸€ä¸ªæŒ‰é’®å¯ä»¥å°†ç„¦ç‚¹ä»ç¬¬ä¸€ä¸ª<code>TextField</code>æŒªåˆ°ç¬¬äºŒä¸ª<code>TextField</code>ã€‚</li>
<li>ç‚¹å‡»ç¬¬äºŒä¸ªæŒ‰é’®å¯ä»¥å…³é—­é”®ç›˜ã€‚</li>
</ul>
<p>æˆ‘ä»¬è¦å®ç°çš„æ•ˆæœå¦‚å›¾3-21æ‰€ç¤ºï¼š</p>
<p><img src="../imgs/3-21.png" alt="å›¾3-21" /></p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="language-dart">class FocusTestRoute extends StatefulWidget {
  @override
  _FocusTestRouteState createState() =&gt; _FocusTestRouteState();
}

class _FocusTestRouteState extends State&lt;FocusTestRoute&gt; {
  FocusNode focusNode1 = FocusNode();
  FocusNode focusNode2 = FocusNode();
  FocusScopeNode? focusScopeNode;

  @override
  Widget build(BuildContext context) {
    return Padding(
      padding: EdgeInsets.all(16.0),
      child: Column(
        children: &lt;Widget&gt;[
          TextField(
            autofocus: true, 
            focusNode: focusNode1,//å…³è”focusNode1
            decoration: InputDecoration(
                labelText: "input1"
            ),
          ),
          TextField(
            focusNode: focusNode2,//å…³è”focusNode2
            decoration: InputDecoration(
                labelText: "input2"
            ),
          ),
          Builder(builder: (ctx) {
            return Column(
              children: &lt;Widget&gt;[
                ElevatedButton(
                  child: Text("ç§»åŠ¨ç„¦ç‚¹"),
                  onPressed: () {
                    //å°†ç„¦ç‚¹ä»ç¬¬ä¸€ä¸ªTextFieldç§»åˆ°ç¬¬äºŒä¸ªTextField
                    // è¿™æ˜¯ä¸€ç§å†™æ³• FocusScope.of(context).requestFocus(focusNode2);
                    // è¿™æ˜¯ç¬¬äºŒç§å†™æ³•
                    if(null == focusScopeNode){
                      focusScopeNode = FocusScope.of(context);
                    }
                    focusScopeNode.requestFocus(focusNode2);
                  },
                ),
                ElevatedButton(
                  child: Text("éšè—é”®ç›˜"),
                  onPressed: () {
                    // å½“æ‰€æœ‰ç¼–è¾‘æ¡†éƒ½å¤±å»ç„¦ç‚¹æ—¶é”®ç›˜å°±ä¼šæ”¶èµ·  
                    focusNode1.unfocus();
                    focusNode2.unfocus();
                  },
                ),
              ],
            );
          },
          ),
        ],
      ),
    );
  }

}
</code></pre>
<p><code>FocusNode</code>å’Œ<code>FocusScopeNode</code>è¿˜æœ‰ä¸€äº›å…¶ä»–çš„æ–¹æ³•ï¼Œè¯¦æƒ…å¯ä»¥æŸ¥çœ‹APIæ–‡æ¡£ã€‚</p>
<h4 id="5ç›‘å¬ç„¦ç‚¹çŠ¶æ€æ”¹å˜äº‹ä»¶"><a class="header" href="#5ç›‘å¬ç„¦ç‚¹çŠ¶æ€æ”¹å˜äº‹ä»¶">5ï¼‰ç›‘å¬ç„¦ç‚¹çŠ¶æ€æ”¹å˜äº‹ä»¶</a></h4>
<p><code>FocusNode</code>ç»§æ‰¿è‡ª<code>ChangeNotifier</code>ï¼Œé€šè¿‡<code>FocusNode</code>å¯ä»¥ç›‘å¬ç„¦ç‚¹çš„æ”¹å˜äº‹ä»¶ï¼Œå¦‚ï¼š</p>
<pre><code class="language-dart">...
// åˆ›å»º focusNode   
FocusNode focusNode = FocusNode();
...
// focusNodeç»‘å®šè¾“å…¥æ¡†   
TextField(focusNode: focusNode);
...
// ç›‘å¬ç„¦ç‚¹å˜åŒ–    
focusNode.addListener((){
   print(focusNode.hasFocus);
});
</code></pre>
<p>è·å¾—ç„¦ç‚¹æ—¶<code>focusNode.hasFocus</code>å€¼ä¸º<code>true</code>ï¼Œå¤±å»ç„¦ç‚¹æ—¶ä¸º<code>false</code>ã€‚</p>
<h4 id="6è‡ªå®šä¹‰æ ·å¼"><a class="header" href="#6è‡ªå®šä¹‰æ ·å¼">6ï¼‰è‡ªå®šä¹‰æ ·å¼</a></h4>
<p>è™½ç„¶æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>decoration</code>å±æ€§æ¥å®šä¹‰è¾“å…¥æ¡†æ ·å¼ï¼Œä¸‹é¢ä»¥è‡ªå®šä¹‰è¾“å…¥æ¡†ä¸‹åˆ’çº¿é¢œè‰²ä¸ºä¾‹æ¥ä»‹ç»ä¸€ä¸‹ï¼š</p>
<pre><code class="language-dart">TextField(
  decoration: InputDecoration(
    labelText: "è¯·è¾“å…¥ç”¨æˆ·å",
    prefixIcon: Icon(Icons.person),
    // æœªè·å¾—ç„¦ç‚¹ä¸‹åˆ’çº¿è®¾ä¸ºç°è‰²
    enabledBorder: UnderlineInputBorder(
      borderSide: BorderSide(color: Colors.grey),
    ),
    //è·å¾—ç„¦ç‚¹ä¸‹åˆ’çº¿è®¾ä¸ºè“è‰²
    focusedBorder: UnderlineInputBorder(
      borderSide: BorderSide(color: Colors.blue),
    ),
  ),
),
</code></pre>
<p>ä¸Šé¢ä»£ç æˆ‘ä»¬ç›´æ¥é€šè¿‡InputDecorationçš„enabledBorderå’ŒfocusedBorderæ¥åˆ†åˆ«è®¾ç½®äº†è¾“å…¥æ¡†åœ¨æœªè·å–ç„¦ç‚¹å’Œè·å¾—ç„¦ç‚¹åçš„ä¸‹åˆ’çº¿é¢œè‰²ã€‚å¦å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ä¸»é¢˜æ¥è‡ªå®šä¹‰è¾“å…¥æ¡†çš„æ ·å¼ï¼Œä¸‹é¢æˆ‘ä»¬æ¢ç´¢ä¸€ä¸‹å¦‚ä½•åœ¨ä¸ä½¿ç”¨enabledBorderå’ŒfocusedBorderçš„æƒ…å†µä¸‹æ¥è‡ªå®šä¹‰ä¸‹æ»‘çº¿é¢œè‰²ã€‚</p>
<p>ç”±äº<code>TextField</code>åœ¨ç»˜åˆ¶ä¸‹åˆ’çº¿æ—¶ä½¿ç”¨çš„é¢œè‰²æ˜¯ä¸»é¢˜è‰²é‡Œé¢çš„<code>hintColor</code>ï¼Œä½†æç¤ºæ–‡æœ¬é¢œè‰²ä¹Ÿæ˜¯ç”¨çš„<code>hintColor</code>ï¼Œ å¦‚æœæˆ‘ä»¬ç›´æ¥ä¿®æ”¹<code>hintColor</code>ï¼Œé‚£ä¹ˆä¸‹åˆ’çº¿å’Œæç¤ºæ–‡æœ¬çš„é¢œè‰²éƒ½ä¼šå˜ã€‚å€¼å¾—é«˜å…´çš„æ˜¯<code>decoration</code>ä¸­å¯ä»¥è®¾ç½®<code>hintStyle</code>ï¼Œå®ƒå¯ä»¥è¦†ç›–<code>hintColor</code>ï¼Œå¹¶ä¸”ä¸»é¢˜ä¸­å¯ä»¥é€šè¿‡<code>inputDecorationTheme</code>æ¥è®¾ç½®è¾“å…¥æ¡†é»˜è®¤çš„<code>decoration</code>ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸»é¢˜æ¥è‡ªå®šä¹‰ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="language-dart">Theme(
  data: Theme.of(context).copyWith(
      hintColor: Colors.grey[200], //å®šä¹‰ä¸‹åˆ’çº¿é¢œè‰²
      inputDecorationTheme: InputDecorationTheme(
          labelStyle: TextStyle(color: Colors.grey),//å®šä¹‰labelå­—ä½“æ ·å¼
          hintStyle: TextStyle(color: Colors.grey, fontSize: 14.0)//å®šä¹‰æç¤ºæ–‡æœ¬æ ·å¼
      )
  ),
  child: Column(
    children: &lt;Widget&gt;[
      TextField(
        decoration: InputDecoration(
            labelText: "ç”¨æˆ·å",
            hintText: "ç”¨æˆ·åæˆ–é‚®ç®±",
            prefixIcon: Icon(Icons.person)
        ),
      ),
      TextField(
        decoration: InputDecoration(
            prefixIcon: Icon(Icons.lock),
            labelText: "å¯†ç ",
            hintText: "æ‚¨çš„ç™»å½•å¯†ç ",
            hintStyle: TextStyle(color: Colors.grey, fontSize: 13.0)
        ),
        obscureText: true,
      )
    ],
  )
)
</code></pre>
<p>è¿è¡Œæ•ˆæœå¦‚å›¾3-22æ‰€ç¤ºï¼š</p>
<p><img src="../imgs/3-22.png" alt="å›¾3-22" /></p>
<p>æˆ‘ä»¬æˆåŠŸçš„è‡ªå®šä¹‰äº†ä¸‹åˆ’çº¿é¢œè‰²å’Œæé—®æ–‡å­—æ ·å¼ï¼Œç»†å¿ƒçš„è¯»è€…å¯èƒ½å·²ç»å‘ç°ï¼Œé€šè¿‡è¿™ç§æ–¹å¼è‡ªå®šä¹‰åï¼Œè¾“å…¥æ¡†åœ¨è·å–ç„¦ç‚¹æ—¶ï¼Œ<code>labelText</code>ä¸ä¼šé«˜äº®æ˜¾ç¤ºäº†ï¼Œæ­£å¦‚ä¸Šå›¾ä¸­çš„"ç”¨æˆ·å"æœ¬åº”è¯¥æ˜¾ç¤ºè“è‰²ï¼Œä½†ç°åœ¨å´æ˜¾ç¤ºä¸ºç°è‰²ï¼Œå¹¶ä¸”æˆ‘ä»¬è¿˜æ˜¯æ— æ³•å®šä¹‰ä¸‹åˆ’çº¿å®½åº¦ã€‚å¦ä¸€ç§çµæ´»çš„æ–¹å¼æ˜¯ç›´æ¥éšè—æ‰<code>TextField</code>æœ¬èº«çš„ä¸‹åˆ’çº¿ï¼Œç„¶åé€šè¿‡<code>Container</code>å»åµŒå¥—å®šä¹‰æ ·å¼ï¼Œå¦‚:</p>
<pre><code class="language-dart">Container(
  child: TextField(
    keyboardType: TextInputType.emailAddress,
    decoration: InputDecoration(
        labelText: "Email",
        hintText: "ç”µå­é‚®ä»¶åœ°å€",
        prefixIcon: Icon(Icons.email),
        border: InputBorder.none //éšè—ä¸‹åˆ’çº¿
    )
  ),
  decoration: BoxDecoration(
      // ä¸‹æ»‘çº¿æµ…ç°è‰²ï¼Œå®½åº¦1åƒç´ 
      border: Border(bottom: BorderSide(color: Colors.grey[200], width: 1.0))
  ),
)
</code></pre>
<p>è¿è¡Œæ•ˆæœå¦‚å›¾3-23ï¼š</p>
<p><img src="../imgs/3-23.png" alt="3-23" /></p>
<p>é€šè¿‡è¿™ç§ç»„ä»¶ç»„åˆçš„æ–¹å¼ï¼Œä¹Ÿå¯ä»¥å®šä¹‰èƒŒæ™¯åœ†è§’ç­‰ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä¼˜å…ˆé€šè¿‡<code>decoration</code>æ¥è‡ªå®šä¹‰æ ·å¼ï¼Œå¦‚æœ<code>decoration</code>å®ç°ä¸äº†ï¼Œå†ç”¨widgetç»„åˆçš„æ–¹å¼ã€‚</p>
<blockquote>
<p>æ€è€ƒé¢˜ï¼šåœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œä¸‹åˆ’çº¿é¢œè‰²æ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥è·å¾—ç„¦ç‚¹åé¢œè‰²ä»ç„¶ä¸ºç°è‰²ï¼Œå¦‚ä½•å®ç°ç‚¹å‡»åä¸‹æ»‘çº¿ä¹Ÿå˜è‰²å‘¢ï¼Ÿ</p>
</blockquote>
<h2 id="352-è¡¨å•form"><a class="header" href="#352-è¡¨å•form">3.5.2 è¡¨å•Form</a></h2>
<p>å®é™…ä¸šåŠ¡ä¸­ï¼Œåœ¨æ­£å¼å‘æœåŠ¡å™¨æäº¤æ•°æ®å‰ï¼Œéƒ½ä¼šå¯¹å„ä¸ªè¾“å…¥æ¡†æ•°æ®è¿›è¡Œåˆæ³•æ€§æ ¡éªŒï¼Œä½†æ˜¯å¯¹æ¯ä¸€ä¸ª<code>TextField</code>éƒ½åˆ†åˆ«è¿›è¡Œæ ¡éªŒå°†ä¼šæ˜¯ä¸€ä»¶å¾ˆéº»çƒ¦çš„äº‹ã€‚è¿˜æœ‰ï¼Œå¦‚æœç”¨æˆ·æƒ³æ¸…é™¤ä¸€ç»„<code>TextField</code>çš„å†…å®¹ï¼Œé™¤äº†ä¸€ä¸ªä¸€ä¸ªæ¸…é™¤æœ‰æ²¡æœ‰ä»€ä¹ˆæ›´å¥½çš„åŠæ³•å‘¢ï¼Ÿä¸ºæ­¤ï¼ŒFlutteræä¾›äº†ä¸€ä¸ª<code>Form</code> ç»„ä»¶ï¼Œå®ƒå¯ä»¥å¯¹è¾“å…¥æ¡†è¿›è¡Œåˆ†ç»„ï¼Œç„¶åè¿›è¡Œä¸€äº›ç»Ÿä¸€æ“ä½œï¼Œå¦‚è¾“å…¥å†…å®¹æ ¡éªŒã€è¾“å…¥æ¡†é‡ç½®ä»¥åŠè¾“å…¥å†…å®¹ä¿å­˜ã€‚</p>
<h3 id="1-form"><a class="header" href="#1-form">1. Form</a></h3>
<p><code>Form</code>ç»§æ‰¿è‡ª<code>StatefulWidget</code>å¯¹è±¡ï¼Œå®ƒå¯¹åº”çš„çŠ¶æ€ç±»ä¸º<code>FormState</code>ã€‚æˆ‘ä»¬å…ˆçœ‹çœ‹<code>Form</code>ç±»çš„å®šä¹‰ï¼š</p>
<pre><code class="language-dart">Form({
  required Widget child,
  bool autovalidate = false,
  WillPopCallback onWillPop,
  VoidCallback onChanged,
})
</code></pre>
<ul>
<li><code>autovalidate</code>ï¼šæ˜¯å¦è‡ªåŠ¨æ ¡éªŒè¾“å…¥å†…å®¹ï¼›å½“ä¸º<code>true</code>æ—¶ï¼Œæ¯ä¸€ä¸ªå­ FormField å†…å®¹å‘ç”Ÿå˜åŒ–æ—¶éƒ½ä¼šè‡ªåŠ¨æ ¡éªŒåˆæ³•æ€§ï¼Œå¹¶ç›´æ¥æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ã€‚å¦åˆ™ï¼Œéœ€è¦é€šè¿‡è°ƒç”¨<code>FormState.validate()</code>æ¥æ‰‹åŠ¨æ ¡éªŒã€‚</li>
<li><code>onWillPop</code>ï¼šå†³å®š<code>Form</code>æ‰€åœ¨çš„è·¯ç”±æ˜¯å¦å¯ä»¥ç›´æ¥è¿”å›ï¼ˆå¦‚ç‚¹å‡»è¿”å›æŒ‰é’®ï¼‰ï¼Œè¯¥å›è°ƒè¿”å›ä¸€ä¸ª<code>Future</code>å¯¹è±¡ï¼Œå¦‚æœ Future çš„æœ€ç»ˆç»“æœæ˜¯<code>false</code>ï¼Œåˆ™å½“å‰è·¯ç”±ä¸ä¼šè¿”å›ï¼›å¦‚æœä¸º<code>true</code>ï¼Œåˆ™ä¼šè¿”å›åˆ°ä¸Šä¸€ä¸ªè·¯ç”±ã€‚æ­¤å±æ€§é€šå¸¸ç”¨äºæ‹¦æˆªè¿”å›æŒ‰é’®ã€‚</li>
<li><code>onChanged</code>ï¼š<code>Form</code>çš„ä»»æ„ä¸€ä¸ªå­<code>FormField</code>å†…å®¹å‘ç”Ÿå˜åŒ–æ—¶ä¼šè§¦å‘æ­¤å›è°ƒã€‚</li>
</ul>
<h3 id="2-formfield"><a class="header" href="#2-formfield">2. FormField</a></h3>
<p><code>Form</code>çš„å­å­™å…ƒç´ å¿…é¡»æ˜¯<code>FormField</code>ç±»å‹ï¼Œ<code>FormField</code>æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®šä¹‰å‡ ä¸ªå±æ€§ï¼Œ<code>FormState</code>å†…éƒ¨é€šè¿‡å®ƒä»¬æ¥å®Œæˆæ“ä½œï¼Œ<code>FormField</code>éƒ¨åˆ†å®šä¹‰å¦‚ä¸‹ï¼š</p>
<pre><code class="language-dart">const FormField({
  ...
  FormFieldSetter&lt;T&gt; onSaved, //ä¿å­˜å›è°ƒ
  FormFieldValidator&lt;T&gt;  validator, //éªŒè¯å›è°ƒ
  T initialValue, //åˆå§‹å€¼
  bool autovalidate = false, //æ˜¯å¦è‡ªåŠ¨æ ¡éªŒã€‚
})
</code></pre>
<p>ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼ŒFlutter æä¾›äº†ä¸€ä¸ª<code>TextFormField</code>ç»„ä»¶ï¼Œå®ƒç»§æ‰¿è‡ª<code>FormField</code>ç±»ï¼Œä¹Ÿæ˜¯<code>TextField</code>çš„ä¸€ä¸ªåŒ…è£…ç±»ï¼Œæ‰€ä»¥é™¤äº†<code>FormField</code>å®šä¹‰çš„å±æ€§ä¹‹å¤–ï¼Œå®ƒè¿˜åŒ…æ‹¬<code>TextField</code>çš„å±æ€§ã€‚</p>
<h3 id="3-formstate"><a class="header" href="#3-formstate">3. FormState</a></h3>
<p><code>FormState</code>ä¸º<code>Form</code>çš„<code>State</code>ç±»ï¼Œå¯ä»¥é€šè¿‡<code>Form.of()</code>æˆ–<code>GlobalKey</code>è·å¾—ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å®ƒæ¥å¯¹<code>Form</code>çš„å­å­™<code>FormField</code>è¿›è¡Œç»Ÿä¸€æ“ä½œã€‚æˆ‘ä»¬çœ‹çœ‹å…¶å¸¸ç”¨çš„ä¸‰ä¸ªæ–¹æ³•ï¼š</p>
<ul>
<li><code>FormState.validate()</code>ï¼šè°ƒç”¨æ­¤æ–¹æ³•åï¼Œä¼šè°ƒç”¨<code>Form</code>å­å­™<code>FormFieldçš„validate</code>å›è°ƒï¼Œå¦‚æœæœ‰ä¸€ä¸ªæ ¡éªŒå¤±è´¥ï¼Œåˆ™è¿”å›falseï¼Œæ‰€æœ‰æ ¡éªŒå¤±è´¥é¡¹éƒ½ä¼šè¿”å›ç”¨æˆ·è¿”å›çš„é”™è¯¯æç¤ºã€‚</li>
<li><code>FormState.save()</code>ï¼šè°ƒç”¨æ­¤æ–¹æ³•åï¼Œä¼šè°ƒç”¨<code>Form</code>å­å­™<code>FormField</code>çš„<code>save</code>å›è°ƒï¼Œç”¨äºä¿å­˜è¡¨å•å†…å®¹</li>
<li><code>FormState.reset()</code>ï¼šè°ƒç”¨æ­¤æ–¹æ³•åï¼Œä¼šå°†å­å­™<code>FormField</code>çš„å†…å®¹æ¸…ç©ºã€‚</li>
</ul>
<h3 id="4-ç¤ºä¾‹"><a class="header" href="#4-ç¤ºä¾‹">4. ç¤ºä¾‹</a></h3>
<p>æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ä¸Šé¢ç”¨æˆ·ç™»å½•çš„ç¤ºä¾‹ï¼Œåœ¨æäº¤ä¹‹å‰æ ¡éªŒï¼š</p>
<ol>
<li>ç”¨æˆ·åä¸èƒ½ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºåˆ™æç¤ºâ€œç”¨æˆ·åä¸èƒ½ä¸ºç©ºâ€ã€‚</li>
<li>å¯†ç ä¸èƒ½å°‘äº 6 ä½ï¼Œå¦‚æœå°äº 6 ä¸ºåˆ™æç¤ºâ€œå¯†ç ä¸èƒ½å°‘äº 6 ä½â€ã€‚</li>
</ol>
<p>å®Œæ•´ä»£ç ï¼š</p>
<pre><code class="language-dart">import 'package:flutter/material.dart';

class FormTestRoute extends StatefulWidget {
  @override
  _FormTestRouteState createState() =&gt; _FormTestRouteState();
}

class _FormTestRouteState extends State&lt;FormTestRoute&gt; {
  TextEditingController _unameController = TextEditingController();
  TextEditingController _pwdController = TextEditingController();
  GlobalKey _formKey = GlobalKey&lt;FormState&gt;();

  @override
  Widget build(BuildContext context) {
    return Form(
      key: _formKey, //è®¾ç½®globalKeyï¼Œç”¨äºåé¢è·å–FormState
      autovalidateMode: AutovalidateMode.onUserInteraction,
      child: Column(
        children: &lt;Widget&gt;[
          TextFormField(
            autofocus: true,
            controller: _unameController,
            decoration: InputDecoration(
              labelText: "ç”¨æˆ·å",
              hintText: "ç”¨æˆ·åæˆ–é‚®ç®±",
              icon: Icon(Icons.person),
            ),
            // æ ¡éªŒç”¨æˆ·å
            validator: (v) {
              return v!.trim().isNotEmpty ? null : "ç”¨æˆ·åä¸èƒ½ä¸ºç©º";
            },
          ),
          TextFormField(
            controller: _pwdController,
            decoration: InputDecoration(
              labelText: "å¯†ç ",
              hintText: "æ‚¨çš„ç™»å½•å¯†ç ",
              icon: Icon(Icons.lock),
            ),
            obscureText: true,
            //æ ¡éªŒå¯†ç 
            validator: (v) {
              return v!.trim().length &gt; 5 ? null : "å¯†ç ä¸èƒ½å°‘äº6ä½";
            },
          ),
          // ç™»å½•æŒ‰é’®
          Padding(
            padding: const EdgeInsets.only(top: 28.0),
            child: Row(
              children: &lt;Widget&gt;[
                Expanded(
                  child: ElevatedButton(
                    child: Padding(
                      padding: const EdgeInsets.all(16.0),
                      child: Text("ç™»å½•"),
                    ),
                    onPressed: () {
                      // é€šè¿‡_formKey.currentState è·å–FormStateåï¼Œ
                      // è°ƒç”¨validate()æ–¹æ³•æ ¡éªŒç”¨æˆ·åå¯†ç æ˜¯å¦åˆæ³•ï¼Œæ ¡éªŒ
                      // é€šè¿‡åå†æäº¤æ•°æ®ã€‚
                      if ((_formKey.currentState as FormState).validate()) {
                        //éªŒè¯é€šè¿‡æäº¤æ•°æ®
                      }
                    },
                  ),
                ),
              ],
            ),
          )
        ],
      ),
    );
  }
}
</code></pre>
<p>è¿è¡Œåæ•ˆæœå¦‚å›¾3-24æ‰€ç¤ºï¼š</p>
<p><img src="../imgs/3-24.png" alt="å›¾3-24" /></p>
<p>æ³¨æ„ï¼Œç™»å½•æŒ‰é’®çš„<code>onPressed</code>æ–¹æ³•ä¸­ä¸èƒ½é€šè¿‡<code>Form.of(context)</code>æ¥è·å–<code>FormState</code>ï¼ŒåŸå› æ˜¯ï¼Œæ­¤å¤„çš„<code>context</code>ä¸º<code>FormTestRoute</code>çš„contextï¼Œè€Œ<code>Form.of(context)</code>æ˜¯æ ¹æ®æ‰€æŒ‡å®š<code>context</code>å‘æ ¹å»æŸ¥æ‰¾ï¼Œè€Œ<code>FormState</code>æ˜¯åœ¨<code>FormTestRoute</code>çš„å­æ ‘ä¸­ï¼Œæ‰€ä»¥ä¸è¡Œã€‚æ­£ç¡®çš„åšæ³•æ˜¯é€šè¿‡<code>Builder</code>æ¥æ„å»ºç™»å½•æŒ‰é’®ï¼Œ<code>Builder</code>ä¼šå°†<code>widget</code>èŠ‚ç‚¹çš„<code>context</code>ä½œä¸ºå›è°ƒå‚æ•°ï¼š</p>
<pre><code class="language-dart">Expanded(
 // é€šè¿‡Builderæ¥è·å–ElevatedButtonæ‰€åœ¨widgetæ ‘çš„çœŸæ­£context(Element) 
  child:Builder(builder: (context){
    return ElevatedButton(
      ...
      onPressed: () {
        //ç”±äºæœ¬widgetä¹Ÿæ˜¯Formçš„å­ä»£widgetï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡ä¸‹é¢æ–¹å¼è·å–FormState  
        if(Form.of(context).validate()){
          //éªŒè¯é€šè¿‡æäº¤æ•°æ®
        }
      },
    );
  })
)
</code></pre>
<p>å…¶å®<code>context</code>æ­£æ˜¯æ“ä½œWidgetæ‰€å¯¹åº”çš„<code>Element</code>çš„ä¸€ä¸ªæ¥å£ï¼Œç”±äºWidgetæ ‘å¯¹åº”çš„<code>Element</code>éƒ½æ˜¯ä¸åŒçš„ï¼Œæ‰€ä»¥<code>context</code>ä¹Ÿéƒ½æ˜¯ä¸åŒçš„ï¼Œæœ‰å…³<code>context</code>çš„æ›´å¤šå†…å®¹ä¼šåœ¨æœ¬ä¹¦åé¢è¿›é˜¶ç¯‡ä¸­è¯¦ç»†è®¨è®ºã€‚Flutterä¸­æœ‰å¾ˆå¤šâ€œof(context)â€è¿™ç§æ–¹æ³•ï¼Œè¯»è€…åœ¨ä½¿ç”¨æ—¶ä¸€å®šè¦æ³¨æ„<code>context</code>æ˜¯å¦æ­£ç¡®ã€‚</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../chapter3/radio_and_checkbox.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../chapter3/progress.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../chapter3/radio_and_checkbox.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../chapter3/progress.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
